## 通用转发和SDN

**传统路由器存在问题**

路由器转发仅仅基于分组的目的地址。然而，许多第三层中间盒大量发展：NAT盒重写首部IP地址和端口号；防火墙基于首部字段值阻拦流量或重定向分组以进行其他处理······

基于目的地转发的特征：查找目的IP地址（匹配），然后将分组发送到有特定输出端口的交换结构（动作）。

**SDN**

<img src="C:\Users\cyj250\AppData\Roaming\Typora\typora-user-images\image-20210314085514308.png" alt="image-20210314085514308" style="zoom: 80%;" />

OpenFlow

* 匹配加动作转发表在OpenFlow中称为**流表**，它的表项包括：
  * **首部字段值得集合**：入分组将与之匹配。匹配不上流表项的分组将被丢弃或发送到远程控制器做更多处理。
  * **计数器集合**：（当分组与流表项匹配时更新计数器）。这些计数器可以包括已经与该表项匹配的分组数量，以及自从该表项上次更新以来的时间。
  * 当分组匹配流表项时所采取的动作集合。可能将分组转发到给定的输出端口，丢弃该分组、复制该分组和将它们发送到多个输出端口，重写所选的首部字段。



